---
title: 'BIO00066I Cell Biology: Workshop 2'
date: "`r Sys.Date()`"
output:
  html_document:
    theme: cerulean
    toc: yes
    toc_float:
      collapsed: no
      smooth_scroll: no
    highlight: tango
  pdf_document:
    toc: yes
  word_document:
    toc: yes
editor_options:
  markdown:
    wrap: 72
---

```{r}
#remotes::install_github("rlesur/klippy")
library(klippy)
```

```{r klippy, echo=FALSE, include=TRUE}
klippy::klippy()
```

```{r setup, include=FALSE, echo=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Step 1: Make a R Studio project.

There are two ways to do this:

1.  Open the **File** menu, and choose **New Project**.
2.  Use the Projects drop-down menu at the very **top right** of the R
    Studio window

------------------------------------------------------------------------

## Setting up the R Studio environment

First, we set up our R Studio environment, with these commands:

```{r,message=FALSE}

#clear previous data
rm(list=ls())

#load the tidyverse
library(tidyverse)

#we need this to make pretty plots with the 'ggarrange' package
library(ggpubr)

```

------------------------------------------------------------------------

# Step 2. Getting to know the data

Load the data and see what it looks like.

We will load some data from a website.

```{r,message=FALSE}
cells <-read_tsv(url("https://djeffares.github.io/data/BIO00066I/all-cell-data-FFT.tsv"))
```

### First glimpses of the data

The **cells** object is a *tibble*, which is a tidyverse version of a
*data frame*, with rows (which are usually different observations) and
columns (which are usually different features or aspects of the
observations). Like an excel spreadsheet.

It is important to know what data you have in your tibble. I like to
know:

-   How many rows and columns there are
-   What the column names are
-   What types of values the columns of data have (numeric, factors, or
    text?)

Here are some ways to find this out for our **cells** tibble.

1.  Use the **view(cells)** command (shows the data in a popup window)
2.  Use the **glimpse(cells)** command (counts rows and columns, and
    shows some of the data)
3.  Use the **summary(cells)** command (shows a summary of averages,
    medians and so on)

Try **view** now. This will open a new tab that looks like excel.

You can close this tab, or just clock back you your script.

```{r, message=FALSE}
#try view
view(cells)
```

Now try glimpse

```{r, message=FALSE}
glimpse(cells)
```

We have 91,91 rows, and 25 columns. The **glimpse** command shows
information about each column on a new line like:

\## \$ **replicate** <dbl> 1, 1, 1, 1, 1, 1, 1, 1,

We have column names like: *replicate*, *frame* and *untracked*.

The <dbl> on each line means that the data type is a numeric values with
decimal points.

It is important to use at least one of these when you first read in a
new data set - to check that it is all OK.

------------------------------------------------------------------------

### Data hygiene

It is important to save your work regularly, and to be organised.
Organising files, data and scripts is called **data hygiene**. So take
these steps now to keep up your data hygiene:

-   save your script (from the file menu, or the hot keys: ⌘S on a mac,
    ctrl-s on a PC)
-   save all your data objects using the **save.image** command as below

```{r}
#first record today's date in a variable
date.today<-Sys.Date()

#then create an Rda (R data object file name)
rda.file.name<-paste("BIO00066I.workshop2.",date.today,".Rda",sep="")

#then save the image (which contains all variables)
save.image(rda.file.name)
```

Why put today's date in the file name?

This is a kind of *'date stamp'*. Naming files in this say helps you to
keep track of when you made the file. This is part of data hygiene.

Also - don't forget to save your script.

# Step 3. Exploring the data with plots

From our first views of the data, it looks like we have these values
that could be important to understand.

-   volume
-   radius
-   width
-   dry.mass
-   area
-   length

A good way of understanding data is to plot it.

PS: In all these values **um** means microns. These are usually
represented as **µm**.

### Plot a histogram

Histograms can sometimes be useful.Let's see:

```{r message=FALSE}
ggplot(cells, aes(x=volume))+
  geom_histogram()
```

### Density plots

A density plot might be be better. So let's try that.

```{r}
ggplot(cells, aes(x=volume))+
  geom_density()+
  theme_light()
```

Now examine the **radius** using a **density plot**.

```{r}
ggplot(cells, aes(x=radius))+
  geom_density()+
  theme_light()
```

Looks like there might be **two populations** here, perhaps?

------------------------------------------------------------------------

### Arranging many plots together

Sometimes we want more than one plot on a page. The simple way to do
this is to use **ggarrange**.

First, we make one plot, and we **save** this plot as an object, called
**volume.plot** in this case.

```{r}
#volumne
volume.plot<-ggplot(cells, aes(x=width))+
  geom_density()+
  theme_light()
```

Now make another plot, and save this plot as an object with another
sensible name. Sensible clear object names are another element of data
hygiene.

```{r}
#radius
radius.plot<-ggplot(cells, aes(x=radius))+
  geom_density()+
  theme_light()
```

Now we can arrange these plots onto one page.

-   **ncol** specifies the number of columns the 'plot grid' has
-   **nrow** specifies the number of rows the 'plot grid' has

```{r}
density.plots<-ggarrange(
  volume.plot,
  radius.plot,
  ncol = 2, 
  nrow = 1
)
```

Now save the plot as a jpeg. The default width and height = 7, so lets
make it wider.

```{r}
#plot file name
ggsave(density.plots,
  file="plots/volume-and-radius.density.plots.jpeg",
  width = 7*2,
  height = 7
)
```

You should now have a file in the plots folder of your project called
**volume-and-radius.density.plots.jpeg**.

------------------------------------------------------------------------

## Final comments

We now have a simple, saved tidyverse-compliant data file. We also saved
our data in a file, called something like
\*\*BIO00066I.workshop2.2023-12-18.Rda\* (depending on the date you did
this workshop).

**Keep this file somewhere safe, or email it to yourself.**

PS: It may feel like we didn't do very much biology today. But because
we created a simple tidy object *all* our data analysis will be much
easier from now on.

## End
